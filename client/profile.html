<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - My App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="auth-container">
        <h2>Welcome to Your Profile</h2>
        <p>You have successfully logged in!</p>
        
        <div class="auth-section">
            <h3>Profile Information</h3>
            <div id="profile-info">
                <p>Loading profile...</p>
            </div>
        </div>
        
        <div class="button-group">
            <button type="button" id="logout-button">Sign Out</button>
            <button type="button" id="go-to-app-button">Go to Main App</button>
        </div>
        
        <div id="messages"></div>
    </div>

    <script type="module">
        import { createClient } from '@supabase/supabase-js';
        
        const supabaseUrl = 'https://hoyioekenopqcshktsmi.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhveWlvZWtlbm9wcWNzaGt0c21pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MTI5OTQsImV4cCI6MjA3MDA4ODk5NH0.Z6K5DZAIPwWW-Dc62Q18Xp4xB_NLtd2r4Mgg69N9HbA';
        const supabase = createClient(supabaseUrl, supabaseKey);
        
        const profileInfo = document.getElementById('profile-info');
        const logoutButton = document.getElementById('logout-button');
        const goToAppButton = document.getElementById('go-to-app-button');
        const messagesDiv = document.getElementById('messages');
        
        // Load user profile on page load
        async function loadProfile() {
            try {
                const { data: { user }, error } = await supabase.auth.getUser();
                
                if (error || !user) {
                    window.location.href = '/';
                    return;
                }
                
                profileInfo.innerHTML = `
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>User ID:</strong> ${user.id}</p>
                    <p><strong>Created:</strong> ${new Date(user.created_at).toLocaleDateString()}</p>
                `;
                
            } catch (error) {
                messagesDiv.textContent = 'Error loading profile: ' + error.message;
            }
        }
        
        // Logout function
        async function handleLogout() {
            try {
                const { error } = await supabase.auth.signOut();
                if (error) throw error;
                window.location.href = '/';
            } catch (error) {
                messagesDiv.textContent = 'Error signing out: ' + error.message;
            }
        }
        
        // Go to main app
        function goToMainApp() {
            window.location.href = '/supabase-profile';
        }
        
        // Event listeners
        logoutButton.addEventListener('click', handleLogout);
        goToAppButton.addEventListener('click', goToMainApp);
        
        // Load profile on page load
        loadProfile();
    </script>
</body>
</html>